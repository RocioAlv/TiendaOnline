<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tienda de Art√≠culos de Limpieza</title>
  <style>
    body {
      font-family: Georgia, serif;
      background-color: #f8e8ff;
      color: #333;
      margin: 0;
      padding: 20px;
      scroll-behavior: smooth;
    }

    header {
      text-align: center;
      background-color: #ffb3d9;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow:
        0 0 20px rgba(200,162,200,0.8),
        0 10px 30px rgba(200,162,200,0.5),
        inset 0 0 10px rgba(255,255,255,0.2);
    }

    h1 {
      color: #6a0dad;
      font-family: Georgia, serif;
      font-size: 42px;
      margin: 0;
    }

    header p {
      font-weight: bold;
      color: #333;
      margin-top: 8px;
    }

    .product {
      background-color: #ffe6f7;
      border: 1px solid #ffb3d9;
      border-radius: 10px;
      padding: 15px;
      margin: 10px;
      display: inline-block;
      width: 300px;
      vertical-align: top;
      box-shadow:
        0 0 15px rgba(200,162,200,0.6),
        0 8px 20px rgba(200,162,200,0.4),
        inset 0 0 8px rgba(255,255,255,0.1);
    }

    .product.added {
      background-color: #A997FC;
    }

    .product h3 {
      color: #6a0dad;
      font-family: Georgia, serif;
      font-size: 17px;
      margin: 0 0 8px 0;
    }

    select, input {
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ffb3d9;
      font-family: Georgia, serif;
      font-size: 14px;
      width: calc(100% - 18px);
      box-sizing: border-box;
    }

    button {
      margin: 6px 6px 0 0;
      padding: 8px 10px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      font-family: Georgia, serif;
      font-size: 14px;
    }

    .add-to-cart {
      background-color: #c8a2c8;
      color: white;
    }
    .add-to-cart:hover { background-color: #b894b8; }

    .edit-button {
      background-color: #B2EDED;
      color: black;
      display: none;
    }
    .edit-button:hover { background-color: #A0D8D8; }

    #cart-button {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #B9B2ED;
      color: black;
      padding: 12px 14px;
      border-radius: 10px;
      font-size: 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }

    #cart {
      display: none;
      background-color: #BEA5C9;
      border: 1px solid #ffb3d9;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      color: #000000;
    }

    #cart h3 {
      font-family: Georgia, serif;
      font-size: 14px;
      color: #000000;
      margin: 0 0 12px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    #cart h3::before {
      content: "üõí";
      font-size: 16px;
    }

    #cart ul {
      list-style: none;
      padding: 0;
      color: #000000;
      margin: 8px 0;
    }

    #cart li {
      margin: 6px 0;
      color: #000000;
      font-family: Georgia, serif;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .delete-btn {
      background: none;
      border: none;
      color: #ffb3d9;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
    }
    .delete-btn:hover {
      color: #ff66b3;
    }

    #cart p {
      font-weight: bold;
      color: #000000;
      margin-top: 12px;
      font-family: Georgia, serif;
    }

    #cart button {
      background-color: #2E8B57;
      color: white;
      font-weight: bold;
      font-size: 14px;
      padding: 8px 12px;
      border-radius: 6px;
    }

    #cart button:hover { background-color: #228B22; }

    #message-box {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background-color: #c8a2c8;
      color: white;
      padding: 16px 20px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 1000;
    }

    @media (max-width: 640px) {
      .product { display: block; width: auto; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ART√çCULOS DE LIMPIEZA, LO DE MARY</h1>
    <p>GRACIAS POR ESTAR AQU√ç, AGREGA PRODUCTOS A TU CARRITO Y ENV√çA TU PEDIDO POR WHATSAPP</p>
  </header>

  <div id="products">
    <!-- Perfumina -->
    <div class="product" id="perfumina-product">
      <h3>Perfumina</h3>
      <select id="perfumina-flavor">
        <option value="">Seleccionar fragancia</option>
        <option value="Citronella">Citronella</option>
        <option value="Cherry">Cherry</option>
        <option value="Lisoform">Lisoform</option>
      </select>
      <select id="perfumina-size">
        <option value="0.5">0.5L - $800</option>
        <option value="1">1L - $1000</option>
        <option value="1.5">1.5L - $1300</option>
        <option value="2">2L - $1500</option>
      </select>
      <input type="number" id="perfumina-qty" min="1" value="1" placeholder="Cantidad">
      <button class="add-to-cart" id="perfumina-add" onclick="addToCart('Perfumina', document.getElementById('perfumina-flavor').value, document.getElementById('perfumina-size').value, document.getElementById('perfumina-qty').value)">Agregar al Carrito</button>
      <button class="edit-button" id="perfumina-edit" onclick="editProduct('Perfumina')">EDITAR</button>
    </div>

    <!-- Jab√≥n L√≠quido Ariel -->
    <div class="product" id="jabon-product">
      <h3>Jab√≥n L√≠quido Ariel</h3>
      <select id="jabon-size">
        <option value="0.5">0.5L - $1080</option>
        <option value="1">1L - $1460</option>
        <option value="1.5">1.5L - $1840</option>
        <option value="2">2L - $2220</option>
      </select>
      <input type="number" id="jabon-qty" min="1" value="1" placeholder="Cantidad">
      <button class="add-to-cart" id="jabon-add" onclick="addToCart('Jab√≥n L√≠quido Ariel', '', document.getElementById('jabon-size').value, document.getElementById('jabon-qty').value)">Agregar al Carrito</button>
      <button class="edit-button" id="jabon-edit" onclick="editProduct('Jab√≥n L√≠quido Ariel')">EDITAR</button>
    </div>

    <!-- Lavandina -->
    <div class="product" id="lavandina-product">
      <h3>Lavandina</h3>
      <select id="lavandina-size">
        <option value="0.5">0.5L - $820</option>
        <option value="1">1L - $1150</option>
        <option value="1.5">1.5L - $1450</option>
        <option value="2">2L - $1780</option>
      </select>
      <input type="number" id="lavandina-qty" min="1" value="1" placeholder="Cantidad">
      <button class="add-to-cart" id="lavandina-add" onclick="addToCart('Lavandina', '', document.getElementById('lavandina-size').value, document.getElementById('lavandina-qty').value)">Agregar al Carrito</button>
      <button class="edit-button" id="lavandina-edit" onclick="editProduct('Lavandina')">EDITAR</button>
    </div>

    <!-- Detergente -->
    <div class="product" id="detergente-product">
      <h3>Detergente</h3>
      <select id="detergente-size">
        <option value="0.5">0.5L - $1000</option>
        <option value="1">1L - $1680</option>
        <option value="1.5">1.5L - $2370</option>
        <option value="2">2L - $3060</option>
      </select>
      <input type="number" id="detergente-qty" min="1" value="1" placeholder="Cantidad">
      <button class="add-to-cart" id="detergente-add" onclick="addToCart('Detergente', '', document.getElementById('detergente-size').value, document.getElementById('detergente-qty').value)">Agregar al Carrito</button>
      <button class="edit-button" id="detergente-edit" onclick="editProduct('Detergente')">EDITAR</button>
    </div>
  </div>

  <button id="cart-button" onclick="showCart()">Ver Carrito</button>

  <div id="cart">
    <h3>Mi Carrito</h3>
    <ul id="cart-items"></ul>
    <p>Total: $<span id="total">0</span></p>
    <button onclick="sendOrder()">Enviar Pedido</button>
  </div>

  <div id="message-box">¬°AGREGADO! ‚ô•</div>

  <script>
  let cart = [];
  let total = 0;
  let editingProduct = null;

  function addToCart(product, flavor, size, qty) {
    qty = parseInt(qty) || 1;
    if (!size) { alert('Seleccion√° un tama√±o'); return; }
    let price = getPrice(product, size);
    if (price === undefined) { alert('Precio no definido'); return; }
    let displayName = flavor ? `${product} (${flavor})` : product;

    if (editingProduct === product) {
      let existing = cart.find(i => i.product.startsWith(product));
      if (existing) {
        total -= existing.price;
        existing.product = displayName;
        existing.size = size;
        existing.qty = qty;
        existing.price = price * qty;
        total += existing.price;
      }
      resetEditMode(product);
    } else {
      cart.push({ product: displayName, size, qty, price: price * qty });
      total += price * qty;
      showMessage();
    }
    updateCartButton();
    updateEditButtons();
    updateProductColors();
    showCart();
  }

  function getPrice(product, size) {
    const prices = {
      'Perfumina': { '0.5': 800, '1': 1000, '1.5': 1300, '2': 1500 },
      'Jab√≥n L√≠quido Ariel': { '0.5': 1080, '1': 1460, '1.5': 1840, '2': 2220 },
      'Lavandina': { '0.5': 820, '1': 1150, '1.5': 1450, '2': 1780 },
      'Detergente': { '0.5': 1000, '1': 1680, '1.5': 2370, '2': 3060 }
    };
    return prices[product]?.[size];
  }

  function updateCartButton() {
    document.getElementById('cart-button').style.display = cart.length ? 'block' : 'none';
  }

  function updateEditButtons() {
    const products = ['Perfumina', 'Jab√≥n L√≠quido Ariel', 'Lavandina', 'Detergente'];
    products.forEach(prod => {
      let hasItem = cart.some(i => i.product.startsWith(prod));
      let btn = document.getElementById(prod.toLowerCase().replace(/ /g, '-') + '-edit');
      if (btn) btn.style.display = hasItem ? 'inline-block' : 'none';
    });
  }

  function updateProductColors() {
    const products = ['Perfumina', 'Jab√≥n L√≠quido Ariel', 'Lavandina', 'Detergente'];
    products.forEach(prod => {
      let hasItem = cart.some(i => i.product.startsWith(prod));
      let el = document.getElementById(prod.toLowerCase().replace(/ /g, '-') + '-product');
      if (el) el.classList.toggle('added', hasItem);
    });
  }

  function editProduct(product) {
    editingProduct = product;
    let existing = cart.find(i => i.product.startsWith(product));
    if (existing) {
      let id = product.toLowerCase().replace(/ /g, '-');
      if (product === 'Perfumina') {
        let m = existing.product.match(/\(([^)]+)\)/);
        document.getElementById('perfumina-flavor').value = m ? m[1] : '';
      }
      document.getElementById(id + '-size').value = existing.size;
      document.getElementById(id + '-qty').value = existing.qty;
      document.getElementById(id + '-add').textContent = 'ACTUALIZAR';
      setTimeout(() => document.getElementById(id + '-product')?.scrollIntoView({behavior:'smooth', block:'center'}), 150);
    }
  }

  function resetEditMode(product) {
    editingProduct = null;
    let id = product.toLowerCase().replace(/ /g, '-');
    document.getElementById(id + '-add').textContent = 'Agregar al Carrito';
  }

  function deleteFromCart(index) {
    total -= cart[index].price;
    cart.splice(index, 1);
    updateCartButton();
    updateEditButtons();
    updateProductColors();
    showCart();
  }

  function showCart() {
    const div = document.getElementById('cart');
    div.style.display = 'block';
    const list = document.getElementById('cart-items');
    list.innerHTML = '';
    if (!cart.length) list.innerHTML = '<li>(vac√≠o)</li>';
    else cart.forEach((item, i) => {
      let li = document.createElement('li');
      li.innerHTML = `${item.product} - ${item.size}L x ${item.qty} = $${item.price}
        <button class="delete-btn" onclick="deleteFromCart(${i})">‚úñ</button>`;
      list.appendChild(li);
    });
    document.getElementById('total').textContent = total;
  }

  function sendOrder() {
    if (!cart.length) { alert('El carrito est√° vac√≠o'); return; }
    let message = 'Hola! üëã Quiero hacerte un pedido de:\n\n';
    cart.forEach(item => message += `‚Ä¢ ${item.product} (${item.size}L) x ${item.qty} = $${item.price}\n`);
    message += `\nTotal: $${total}\n\n¬°Gracias! üòä`;
    let url = `https://wa.me/3364326790?text=${encodeURIComponent(message)}`;
    window.open(url, '_blank');
  }

  function showMessage() {
    let msg = document.getElementById('message-box');
    msg.style.display = 'block';
    setTimeout(() => msg.style.display = 'none', 1800);
  }

  updateCartButton();
  updateEditButtons();
  updateProductColors();

  // üëá ESTA ES LA NUEVA L√çNEA que hace que el bot√≥n "Ver Carrito" desplace hacia abajo:
  document.getElementById("cart-button").addEventListener("click", function() {
      document.getElementById("cart").scrollIntoView({ behavior: "smooth" });
  });
</script>

</body>
</html>



